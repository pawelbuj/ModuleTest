<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Datapolis 2to2 â€“ Two partners. Two worlds. One flow.</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Datapolis 2to2 â€“ lists, forms, state workflows, page modules, and AI agents." />

  <style>
    :root{
      --brand-1:#003642;
      --brand-2:#2e5e6b;

      --bg1:#1f2937;
      --bg2:#020617;
      --card:#0f172a;
      --border:rgba(148,163,184,.35);
      --text:#e5e7eb;
      --muted:#9ca3af;

      --shadow:0 24px 60px rgba(0,0,0,.55);
      --r-lg:18px;
      --r-md:12px;

      --danger:#ef4444;
      --ok:#22c55e;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:radial-gradient(circle at top left,var(--bg1) 0,var(--bg2) 52%,#000 100%);
      color:var(--text);
      line-height:1.6;
      -webkit-font-smoothing:antialiased;
    }
    a{color:inherit;text-decoration:none}
    .page{min-height:100vh;display:flex;flex-direction:column}

    header{
      position:sticky;top:0;z-index:40;
      backdrop-filter:blur(18px);
      background:linear-gradient(to bottom,rgba(2,6,23,.96),rgba(2,6,23,.90),rgba(2,6,23,.80));
      border-bottom:1px solid rgba(148,163,184,.12);
    }
    .nav{
      max-width:1140px;margin:0 auto;
      padding:.7rem 1.4rem;
      display:flex;align-items:center;justify-content:space-between;gap:1rem;
    }
    .nav-left{display:flex;align-items:center;gap:.75rem}

    .logo-wrap{
      width:34px;height:34px;border-radius:12px;
      background:
        radial-gradient(circle at 30% 20%, rgba(255,255,255,.16) 0, transparent 55%),
        linear-gradient(145deg,var(--brand-2),var(--brand-1));
      display:grid;place-items:center;
      box-shadow:0 0 0 1px rgba(15,23,42,.75),0 16px 35px rgba(0,0,0,.55);
      overflow:hidden;
      flex-shrink:0;
    }
    .logo-img{
      width:26px;height:26px;object-fit:contain;
      filter:drop-shadow(0 6px 12px rgba(0,0,0,.35));
    }

    .logo-text{display:flex;flex-direction:column}
    .logo-text span:first-child{
      font-weight:700;letter-spacing:.14em;text-transform:uppercase;font-size:.78rem;
    }
    .logo-text span:last-child{font-size:.72rem;color:var(--muted)}

    .nav-menu{
      display:flex;align-items:center;gap:1.3rem;font-size:.86rem;
    }
    .nav-menu a{color:var(--muted);font-weight:500;white-space:nowrap;position:relative}
    .nav-menu a::after{
      content:"";position:absolute;left:0;bottom:-.28rem;width:0;height:2px;border-radius:999px;
      background:linear-gradient(90deg,#0ea5e9,#22c55e);transition:width .16s ease-out;
    }
    .nav-menu a:hover{color:var(--text)}
    .nav-menu a:hover::after{width:100%}

    .nav-cta{display:flex;align-items:center;gap:.6rem}
    .btn{
      border-radius:999px;padding:.52rem 1.4rem;font-size:.86rem;font-weight:600;
      border:1px solid transparent;cursor:pointer;
      display:inline-flex;align-items:center;justify-content:center;gap:.45rem;
      transition:transform .08s ease, box-shadow .08s ease, background .1s ease, border-color .1s ease, color .1s ease, opacity .1s ease;
      white-space:nowrap;
      user-select:none;
    }
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .btn-primary{
      background:radial-gradient(circle at top left,#38bdf8 0,#16a085 45%,#0f172a 100%);
      color:#f9fafb;box-shadow:0 14px 40px rgba(15,23,42,.9);
    }
    .btn-primary:hover{transform:translateY(-1px);box-shadow:0 18px 55px rgba(15,23,42,.95)}
    .btn-ghost{
      background:transparent;color:var(--muted);border-color:rgba(148,163,184,.35);
    }
    .btn-ghost:hover{color:var(--text);background:rgba(15,23,42,.75)}
    .btn-link{
      background:transparent;border-color:transparent;padding:.2rem .2rem;
      color:#93c5fd;font-weight:600;border-radius:8px;
    }
    .btn-link:hover{color:#e5e7eb;text-decoration:underline;text-underline-offset:3px}

    main{flex:1}
    .container{max-width:1140px;margin:0 auto;padding:2.4rem 1.4rem 3.2rem}

    .hero{
      display:grid;
      grid-template-columns:minmax(0,3.1fr) minmax(0,2.8fr);
      gap:3rem;align-items:center;
      padding-top:2.1rem;padding-bottom:2.2rem;
    }
    .hero-tag{
      display:inline-flex;align-items:center;gap:.55rem;
      padding:.28rem .8rem;border-radius:999px;
      background:rgba(15,23,42,.9);border:1px solid rgba(148,163,184,.4);
      font-size:.72rem;letter-spacing:.14em;text-transform:uppercase;color:var(--muted);
      margin-bottom:.85rem;
    }
    .dot{width:7px;height:7px;border-radius:999px;background:#22c55e;box-shadow:0 0 0 4px rgba(34,197,94,.25)}
    .hero-tag span:last-child{display:inline-flex;align-items:center;gap:.3rem;color:#bbf7d0}

    h1{
      font-size:clamp(2.35rem,3vw + 1.6rem,3.1rem);
      line-height:1.1;margin-bottom:.75rem;color:#f9fafb;
    }
    .hero-highlight{
      background:linear-gradient(120deg,#38bdf8,#22c55e,#a855f7);
      -webkit-background-clip:text;color:transparent;
    }
    .hero p{font-size:.98rem;color:var(--muted);max-width:34rem;margin-bottom:1rem}

    .hero-actions{display:flex;flex-wrap:wrap;gap:.9rem;align-items:center;margin-bottom:1rem}
    .hero-meta{display:flex;flex-wrap:wrap;gap:1.2rem;font-size:.78rem;color:var(--muted)}
    .hero-meta span{display:inline-flex;align-items:center;gap:.35rem}

    .hero-panel{
      position:relative;border-radius:26px;
      padding:1.6rem 1.5rem 1.3rem;
      background:
        radial-gradient(circle at 0 0,#38bdf8 0,transparent 55%),
        radial-gradient(circle at 100% 100%,#22c55e 0,transparent 50%),
        linear-gradient(145deg,#020617,#020617 40%,#020617 100%);
      box-shadow:var(--shadow);border:1px solid rgba(148,163,184,.32);
      overflow:hidden;isolation:isolate;
    }
    .hero-panel::after{
      content:"";position:absolute;inset:-40%;opacity:.28;
      background:
        radial-gradient(circle at 10% 0, rgba(248,250,252,.2), transparent 60%),
        radial-gradient(circle at 80% 100%, rgba(248,250,252,.16), transparent 55%);
      mix-blend-mode:screen;pointer-events:none;
    }
    .hero-panel-inner{position:relative;z-index:1}
    .hero-panel-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.1rem}
    .hero-panel-title{font-size:.86rem;font-weight:700;color:#e5e7eb}
    .hero-panel-caption{font-size:.75rem;color:#cbd5f5}
    .badge{
      padding:.22rem .7rem;border-radius:999px;background:rgba(15,23,42,.85);
      border:1px solid rgba(148,163,184,.45);
      font-size:.68rem;text-transform:uppercase;letter-spacing:.14em;color:#e5e7eb;
    }
    .metrics-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:.9rem;margin-bottom:1.1rem}
    .metric{
      border-radius:14px;padding:.8rem .85rem;
      background:rgba(15,23,42,.92);border:1px solid rgba(148,163,184,.4);
      backdrop-filter:blur(10px);
    }
    .metric-label{font-size:.7rem;color:#cbd5e1;margin-bottom:.12rem}
    .metric-value{font-size:1.18rem;font-weight:800;color:#e5e7eb}
    .metric-caption{font-size:.72rem;color:#9ca3af}
    .timeline{margin-top:.4rem;border-radius:999px;height:6px;background:rgba(15,23,42,.9);overflow:hidden;border:1px solid rgba(148,163,184,.4)}
    .timeline-fill{height:100%;width:72%;border-radius:999px;background:linear-gradient(90deg,#22c55e,#38bdf8)}

    .section{padding-top:2.7rem;padding-bottom:2rem}
    .section-header{display:flex;justify-content:space-between;align-items:flex-end;gap:1.6rem;margin-bottom:1.6rem}
    .section-kicker{font-size:.75rem;letter-spacing:.18em;text-transform:uppercase;color:var(--muted);margin-bottom:.2rem}
    .section-title{font-size:1.4rem;color:#f9fafb}
    .section-subtitle{font-size:.9rem;color:var(--muted);max-width:32rem}

    .cards{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:1.3rem}
    .card{
      background:radial-gradient(circle at top left, rgba(56,189,248,.16), transparent 55%),
                 radial-gradient(circle at bottom right, rgba(34,197,94,.16), transparent 55%),
                 var(--card);
      border-radius:var(--r-lg);
      padding:1.1rem 1.25rem 1.05rem;
      border:1px solid var(--border);
      box-shadow:0 18px 45px rgba(15,23,42,.85);
    }
    .card-icon{
      width:30px;height:30px;border-radius:999px;background:rgba(15,23,42,.9);
      display:flex;align-items:center;justify-content:center;
      font-size:.98rem;color:#e5e7eb;margin-bottom:.65rem;
      box-shadow:0 12px 25px rgba(0,0,0,.75);
    }
    .card-title{font-size:1rem;font-weight:700;margin-bottom:.28rem;color:#f9fafb}
    .card-text{font-size:.86rem;color:var(--muted)}

    .clients-row{display:flex;flex-wrap:wrap;gap:.9rem;align-items:center;font-size:.8rem;color:var(--muted)}
    .client-pill{padding:.36rem .9rem;border-radius:999px;border:1px solid rgba(148,163,184,.4);background:rgba(15,23,42,.9);font-size:.78rem}

    .contact-grid{display:grid;grid-template-columns:minmax(0,2.4fr) minmax(0,2.2fr);gap:2rem}
    .contact-form-card{
      background:rgba(15,23,42,.96);
      border-radius:var(--r-lg);
      border:1px solid var(--border);
      padding:1.3rem 1.4rem 1.2rem;
      box-shadow:var(--shadow);
      max-width:520px;
    }
    label{font-size:.78rem;font-weight:700;color:#e5e7eb}
    input,textarea{
      width:100%;margin-top:.22rem;padding:.5rem .65rem;
      border-radius:9px;border:1px solid rgba(148,163,184,.6);
      background:rgba(15,23,42,.9);color:#e5e7eb;font-size:.84rem;outline:none;
    }
    input:focus,textarea:focus{border-color:#38bdf8;box-shadow:0 0 0 1px rgba(56,189,248,.55)}
    textarea{resize:vertical;min-height:110px}
    .form-grid{display:grid;gap:.7rem}
    .form-footer{margin-top:.9rem;display:flex;justify-content:space-between;align-items:center;gap:.7rem;flex-wrap:wrap}
    .form-note{font-size:.73rem;color:var(--muted)}
    .contact-details{font-size:.86rem;color:var(--muted)}
    .contact-details strong{color:#e5e7eb}
    .contact-details p + p{margin-top:.5rem}

    footer{border-top:1px solid rgba(148,163,184,.25);background:rgba(2,6,23,.98)}
    .footer-inner{
      max-width:1140px;margin:0 auto;padding:1.3rem 1.4rem 1.6rem;
      display:flex;flex-wrap:wrap;justify-content:space-between;gap:1rem;
      font-size:.8rem;color:var(--muted);
    }
    .footer-links{display:flex;gap:1rem;flex-wrap:wrap}
    .footer-links a{text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:3px}

    @media (max-width:900px){
      .hero{grid-template-columns:minmax(0,1fr)}
      .hero-panel{order:-1}
      .cards,.contact-grid{grid-template-columns:minmax(0,1fr)}
    }
    @media (max-width:760px){
      .nav-menu{display:none}
      .nav{padding-inline:1rem}
      .hero-actions{flex-direction:column;align-items:stretch}
      .hero{padding-top:1.4rem}
    }
    @media (max-width:520px){
      .container{padding-inline:1rem}
      .cards{grid-template-columns:minmax(0,1fr)}
    }

    /* ===== AUTH MODAL ===== */
    .auth-backdrop{
      position:fixed;inset:0;
      background:rgba(2,6,23,.72);
      backdrop-filter:blur(10px);
      display:none;
      align-items:center;
      justify-content:center;
      padding:1.2rem;
      z-index:200;
    }
    .auth-backdrop[data-open="true"]{display:flex}

    .auth-modal{
      width:min(520px, 100%);
      border-radius:22px;
      background:
        radial-gradient(circle at top right, rgba(56,189,248,.18), transparent 55%),
        radial-gradient(circle at bottom left, rgba(34,197,94,.16), transparent 55%),
        rgba(15,23,42,.96);
      border:1px solid rgba(148,163,184,.35);
      box-shadow:0 30px 80px rgba(0,0,0,.65);
      overflow:hidden;
    }
    .auth-head{
      display:flex;align-items:flex-start;justify-content:space-between;gap:1rem;
      padding:1.1rem 1.2rem .9rem;
      border-bottom:1px solid rgba(148,163,184,.18);
    }
    .auth-title{
      font-size:1rem;font-weight:800;color:#f9fafb;
      display:flex;align-items:center;gap:.6rem;
    }
    .auth-sub{
      font-size:.82rem;color:var(--muted);margin-top:.2rem;
      max-width:26rem;
    }
    .auth-close{
      width:34px;height:34px;border-radius:12px;
      border:1px solid rgba(148,163,184,.35);
      background:rgba(15,23,42,.75);
      color:var(--text);
      cursor:pointer;
      display:grid;place-items:center;
    }
    .auth-close:hover{background:rgba(15,23,42,.95)}

    .auth-body{padding:1rem 1.2rem 1.2rem}
    .tabs{
      display:flex;gap:.5rem;align-items:center;
      background:rgba(2,6,23,.35);
      border:1px solid rgba(148,163,184,.22);
      border-radius:999px;
      padding:.3rem;
      width:max-content;
      margin-bottom:.85rem;
    }
    .tab{
      border-radius:999px;
      padding:.42rem .75rem;
      font-size:.82rem;
      font-weight:700;
      color:var(--muted);
      border:1px solid transparent;
      background:transparent;
      cursor:pointer;
    }
    .tab[aria-selected="true"]{
      color:#e5e7eb;
      background:rgba(15,23,42,.9);
      border-color:rgba(148,163,184,.25);
      box-shadow:0 8px 22px rgba(0,0,0,.35);
    }

    .auth-form{display:grid;gap:.8rem}
    .row-2{display:grid;grid-template-columns:1fr auto;gap:.7rem;align-items:end}
    .help-row{display:flex;justify-content:space-between;gap:1rem;flex-wrap:wrap;align-items:center}
    .muted{color:var(--muted);font-size:.78rem}
    .small{font-size:.78rem}
    .error{
      display:none;
      color:#fecaca;
      background:rgba(239,68,68,.10);
      border:1px solid rgba(239,68,68,.30);
      padding:.55rem .65rem;border-radius:12px;
      font-size:.82rem;
    }
    .error[data-show="true"]{display:block}

    .ok{
      display:none;
      color:#bbf7d0;
      background:rgba(34,197,94,.10);
      border:1px solid rgba(34,197,94,.30);
      padding:.55rem .65rem;border-radius:12px;
      font-size:.82rem;
    }
    .ok[data-show="true"]{display:block}

    .auth-footer{
      margin-top:.9rem;
      display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:wrap;
    }
    .kbd{
      font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
      font-size:.72rem;color:var(--muted);
      border:1px solid rgba(148,163,184,.28);
      border-bottom-width:2px;
      border-radius:8px;
      padding:.1rem .35rem;
      background:rgba(2,6,23,.35);
    }
    .sr-only{
      position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;
    }
  </style>
</head>

<body>
<div class="page">
  <header>
    <div class="nav">
      <div class="nav-left">
        <div class="logo-wrap" aria-label="Datapolis logo">
          <img class="logo-img" src="datapolis-logo.svg" alt="Datapolis"
               onerror="this.onerror=null;this.src='datapolis-logo.png';" />
        </div>
        <div class="logo-text">
          <span>DATAPOLIS 2TO2</span>
          <span>AI works. People decide.</span>
        </div>
      </div>

      <nav class="nav-menu">
        <a href="#platform">Platform</a>
        <a href="#blocks">Blocks</a>
        <a href="#usecases">Use cases</a>
        <a href="support.html">Support</a>
        <a href="#contact">Contact</a>
      </nav>

      <div class="nav-cta">
        <button class="btn btn-ghost" type="button">See demo</button>
        <button class="btn btn-ghost" type="button" id="btnSignIn">Sign in</button>
        <button class="btn btn-primary" type="button">Book a call</button>
      </div>
    </div>
  </header>

  <main>
    <section class="container hero" id="platform">
      <div>
        <div class="hero-tag">
          <span>Datapolis 2to2</span>
          <span><span class="dot"></span>Work, connected</span>
        </div>

        <h1>
          Two partners.
          <span class="hero-highlight">Two worlds.</span>
          One flow.
        </h1>

        <p>People and AI agents work together in the digital world to deliver real-world results.</p>

        <div class="hero-actions">
          <button class="btn btn-primary" type="button">Watch it</button>
          <button class="btn btn-ghost" type="button">Talk to us</button>
          <button class="btn btn-ghost" type="button" id="btnSignInHero">Sign in</button>
        </div>

        <div class="hero-meta">
          <span><span class="dot"></span>One model: data + UI + process + roles</span>
          <span>Start small. Scale fast.</span>
        </div>
      </div>

      <aside class="hero-panel" aria-label="Datapolis 2to2 preview">
        <div class="hero-panel-inner">
          <div class="hero-panel-header">
            <div>
              <div class="hero-panel-title">2to2 dashboard</div>
              <div class="hero-panel-caption">Workspace: Back-office</div>
            </div>
            <div class="badge">Live</div>
          </div>

          <div class="metrics-grid">
            <div class="metric">
              <div class="metric-label">New cases</div>
              <div class="metric-value">248</div>
              <div class="metric-caption">today</div>
            </div>
            <div class="metric">
              <div class="metric-label">Agent automation</div>
              <div class="metric-value">46%</div>
              <div class="metric-caption">intake + extraction</div>
            </div>
            <div class="metric">
              <div class="metric-label">Active workflows</div>
              <div class="metric-value">73</div>
              <div class="metric-caption">in progress</div>
            </div>
            <div class="metric">
              <div class="metric-label">Time to decision</div>
              <div class="metric-value">1:18</div>
              <div class="metric-caption">avg</div>
            </div>
          </div>

          <div class="timeline" aria-hidden="true">
            <div class="timeline-fill"></div>
          </div>
        </div>
      </aside>
    </section>

    <section class="container section" id="blocks">
      <div class="section-header">
        <div>
          <div class="section-kicker">Platform</div>
          <h2 class="section-title">Everything connected.</h2>
          <p class="section-subtitle">Lists, forms, workflows, pages and agents share one model.</p>
        </div>
      </div>

      <div class="cards">
        <article class="card"><div class="card-icon">â‰‹</div><h3 class="card-title">Lists</h3><p class="card-text">Structured records.</p></article>
        <article class="card"><div class="card-icon">âŒ—</div><h3 class="card-title">Forms</h3><p class="card-text">Fast UI, role rules.</p></article>
        <article class="card"><div class="card-icon">â–£</div><h3 class="card-title">Workflows</h3><p class="card-text">States and actions.</p></article>
        <article class="card"><div class="card-icon">â–¦</div><h3 class="card-title">Pages</h3><p class="card-text">Dashboards, portals.</p></article>
        <article class="card"><div class="card-icon">âœ¦</div><h3 class="card-title">Roles</h3><p class="card-text">Consistent access.</p></article>
        <article class="card"><div class="card-icon">ðŸ¤–</div><h3 class="card-title">Agents</h3><p class="card-text">Automation with control.</p></article>
      </div>
    </section>

    <section class="container section" id="usecases">
      <div class="section-header">
        <div>
          <div class="section-kicker">Use cases</div>
          <h2 class="section-title">Cross-team work.</h2>
          <p class="section-subtitle">Requests, approvals, handovers â€” tracked.</p>
        </div>
      </div>

      <div class="clients-row">
        <span>Typical:</span>
        <span class="client-pill">Onboarding</span>
        <span class="client-pill">IT requests</span>
        <span class="client-pill">Approvals</span>
        <span class="client-pill">Documents</span>
        <span class="client-pill">Portals</span>
      </div>
    </section>

    <section class="container section" id="contact">
      <div class="section-header">
        <div>
          <div class="section-kicker">Contact</div>
          <h2 class="section-title">Run a small pilot.</h2>
          <p class="section-subtitle">Fast proof, then scale.</p>
        </div>
      </div>

      <div class="contact-grid">
        <div class="contact-form-card">
          <form>
            <div class="form-grid">
              <div><label for="name">Name</label><br /><input id="name" type="text" autocomplete="name" /></div>
              <div><label for="email">Work email</label><br /><input id="email" type="email" autocomplete="email" /></div>
              <div><label for="company">Company</label><br /><input id="company" type="text" autocomplete="organization" /></div>
              <div><label for="message">What do you want to fix?</label><br />
                <textarea id="message" rows="4" placeholder="E.g. approvals, onboarding, IT requests..."></textarea></div>
            </div>
            <div class="form-footer">
              <button class="btn btn-primary" type="submit">Send</button>
              <div class="form-note">Demo form â€” plug in your backend / 2to2 module.</div>
            </div>
          </form>
        </div>

        <div class="contact-details">
          <p><strong>Datapolis 2to2</strong><br/>Lists, forms, workflows, pages and AI agents.</p>
          <p><strong>Email:</strong> <a href="mailto:office@datapolis.com">office@datapolis.com</a><br/>
             <strong>Phone:</strong> +48 601 33 20 56</p>
          <p><strong>Address:</strong><br/>ul. Dzielna 21/121A<br/>01-029 Warsaw, Poland</p>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-inner">
      <div>Â© <span id="year"></span> Datapolis. All rights reserved.</div>
      <div class="footer-links">
        <a href="#platform">Platform</a>
        <a href="#blocks">Blocks</a>
        <a href="#usecases">Use cases</a>
        <a href="support.html">Support</a>
        <a href="#contact">Contact</a>
      </div>
    </div>
  </footer>
</div>

<!-- AUTH MODAL -->
<div class="auth-backdrop" id="authBackdrop" aria-hidden="true">
  <div class="auth-modal" role="dialog" aria-modal="true" aria-labelledby="authTitle">
    <div class="auth-head">
      <div>
        <div class="auth-title" id="authTitle">
          Sign in to 2to2
        </div>
        <div class="auth-sub" id="authSubtitle">
          New here? Use a magic link. Returning user? Password works too.
        </div>
      </div>
      <button class="auth-close" type="button" id="authClose" aria-label="Close">âœ•</button>
    </div>

    <div class="auth-body">
      <div class="tabs" role="tablist" aria-label="Sign in method">
        <button class="tab" type="button" role="tab" id="tabMagic" aria-selected="true">Magic link</button>
        <button class="tab" type="button" role="tab" id="tabPassword" aria-selected="false">Password</button>
      </div>

      <div class="error" id="authError" data-show="false"></div>
      <div class="ok" id="authOk" data-show="false"></div>

      <form class="auth-form" id="authForm">
        <div>
          <label for="authEmail">Email</label><br/>
          <input id="authEmail" type="email" autocomplete="email" placeholder="name@company.com" required />
        </div>

        <div id="passwordBlock" style="display:none">
          <label for="authPassword">Password</label><br/>
          <input id="authPassword" type="password" autocomplete="current-password" placeholder="Enter your password" />
        </div>

        <div class="help-row">
          <div class="muted" id="hintText">
            Weâ€™ll email you a one-time sign-in link.
          </div>
          <button class="btn btn-link small" type="button" id="btnForgot" style="display:none">
            Forgot password?
          </button>
        </div>

        <div class="auth-footer">
          <button class="btn btn-primary" type="submit" id="btnSubmit">
            Send magic link
          </button>
          <div class="muted">
            Tip: press <span class="kbd">Enter</span>
          </div>
        </div>

        <div class="muted" style="margin-top:.8rem">
          No account? <button class="btn btn-link" type="button" id="btnSignup">Request access</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  document.getElementById('year').textContent = new Date().getFullYear();

  // ===== AUTH UX =====
  const backdrop = document.getElementById('authBackdrop');
  const closeBtn = document.getElementById('authClose');
  const btnSignIn = document.getElementById('btnSignIn');
  const btnSignInHero = document.getElementById('btnSignInHero');

  const tabMagic = document.getElementById('tabMagic');
  const tabPassword = document.getElementById('tabPassword');

  const emailInput = document.getElementById('authEmail');
  const passBlock = document.getElementById('passwordBlock');
  const passInput = document.getElementById('authPassword');

  const hintText = document.getElementById('hintText');
  const btnForgot = document.getElementById('btnForgot');
  const btnSubmit = document.getElementById('btnSubmit');
  const form = document.getElementById('authForm');

  const authError = document.getElementById('authError');
  const authOk = document.getElementById('authOk');

  let lastFocusEl = null;
  let mode = 'magic'; // 'magic' | 'password'

  function getReturnTo() {
    const url = new URL(window.location.href);
    const rt = url.searchParams.get('returnTo');
    return rt && rt.startsWith('/') ? rt : '/app';
  }

  function openAuth() {
    lastFocusEl = document.activeElement;
    backdrop.dataset.open = "true";
    backdrop.setAttribute('aria-hidden', 'false');
    clearMessages();

    // preload last email for returning users
    const saved = localStorage.getItem('2to2_last_email');
    if (saved && !emailInput.value) emailInput.value = saved;

    // small smart default:
    // if we have a saved email -> password mode is often quicker for returning users,
    // but don't force it; keep magic by default (safer).
    setTimeout(() => {
      emailInput.focus();
      emailInput.select();
    }, 30);

    document.addEventListener('keydown', onEsc);
  }

  function closeAuth() {
    backdrop.dataset.open = "false";
    backdrop.setAttribute('aria-hidden', 'true');
    clearMessages();
    if (lastFocusEl) lastFocusEl.focus();
    document.removeEventListener('keydown', onEsc);
  }

  function onEsc(e) {
    if (e.key === 'Escape') closeAuth();
  }

  function clearMessages(){
    authError.dataset.show = "false";
    authError.textContent = "";
    authOk.dataset.show = "false";
    authOk.textContent = "";
  }

  function setMode(nextMode){
    mode = nextMode;
    clearMessages();

    const isMagic = mode === 'magic';
    tabMagic.setAttribute('aria-selected', String(isMagic));
    tabPassword.setAttribute('aria-selected', String(!isMagic));

    passBlock.style.display = isMagic ? 'none' : 'block';
    btnForgot.style.display = isMagic ? 'none' : 'inline-flex';

    hintText.textContent = isMagic
      ? "Weâ€™ll email you a one-time sign-in link."
      : "Use your password to sign in quickly.";

    btnSubmit.textContent = isMagic ? "Send magic link" : "Sign in";

    if (!isMagic) {
      passInput.required = true;
      setTimeout(() => passInput.focus(), 30);
    } else {
      passInput.required = false;
      passInput.value = "";
    }
  }

  // Click outside closes
  backdrop.addEventListener('click', (e) => {
    if (e.target === backdrop) closeAuth();
  });

  closeBtn.addEventListener('click', closeAuth);
  btnSignIn.addEventListener('click', openAuth);
  btnSignInHero.addEventListener('click', openAuth);

  tabMagic.addEventListener('click', () => setMode('magic'));
  tabPassword.addEventListener('click', () => setMode('password'));

  // Save email as user types (help returning users)
  emailInput.addEventListener('blur', () => {
    const v = (emailInput.value || "").trim();
    if (v) localStorage.setItem('2to2_last_email', v);
  });

  // ===== DEMO LOGIN (replace with real API) =====
  async function doLogin({email, password, mode}) {
    // In real life:
    // - mode === 'magic': POST /auth/magic-link (email, returnTo)
    // - mode === 'password': POST /auth/login (email, password, returnTo)
    // Then redirect to returnTo.

    await new Promise(r => setTimeout(r, 650)); // simulate latency

    const emailOk = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    if (!emailOk) throw new Error("Please enter a valid email.");

    if (mode === 'password') {
      if (!password || password.length < 6) throw new Error("Password looks wrong.");
      return { type: 'session', redirectTo: getReturnTo() };
    }

    return { type: 'magic', message: `Magic link sent to ${email}. Check your inbox.` };
  }

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    clearMessages();

    const email = (emailInput.value || "").trim();
    const password = (passInput.value || "");
    btnSubmit.disabled = true;

    try{
      localStorage.setItem('2to2_last_email', email);
      const res = await doLogin({email, password, mode});

      if (res.type === 'magic') {
        authOk.textContent = res.message;
        authOk.dataset.show = "true";
        btnSubmit.disabled = false;
        return;
      }

      // session login success
      closeAuth();
      window.location.href = res.redirectTo;

    }catch(err){
      authError.textContent = err?.message || "Something went wrong. Try again.";
      authError.dataset.show = "true";
      btnSubmit.disabled = false;
    }
  });

  document.getElementById('btnSignup').addEventListener('click', () => {
    clearMessages();
    authOk.textContent = "Request access: contact your admin or book a call.";
    authOk.dataset.show = "true";
  });

  document.getElementById('btnForgot').addEventListener('click', () => {
    clearMessages();
    // In real life: switch to magic link + tell them it's password reset
    setMode('magic');
    authOk.textContent = "Use magic link to sign in, then reset your password in settings.";
    authOk.dataset.show = "true";
  });

  // Optional: if you want /login deep-link, open modal automatically.
  // e.g. 2to2.ai/?login=1
  (function autoOpen(){
    const url = new URL(window.location.href);
    if (url.searchParams.get('login') === '1') openAuth();
  })();
</script>
</body>
</html>
